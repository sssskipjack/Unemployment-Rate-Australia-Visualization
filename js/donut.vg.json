{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": {
        "text": "Sunburst Charts for Unemployment Reasons by Age Range",
        "font": "Roboto",
        "fontSize": 20,
        "anchor": "middle",
        "color": "#333",
        "subtitle": " ",
        "subtitlePadding": 20
      },
    "description": "Sunburst charts for unemployment reasons by age range, with annotations.",
    "data": {
        "url": "https://raw.githubusercontent.com/sssskipjack/Unemployment-Rate-Australia-Visualization/refs/heads/main/data/wrangledReasons.csv"
    },
    "transform": [
        {
            "calculate": "'20' + substring(datum.Month, 4)",
            "as": "Year"
        },
        {
            "filter": "datum.Year == year"
        }
    ],
    "params": [
        {
            "name": "year",
            "value": "2015",
            "bind": {
                "input": "range",
                "min": 2015,
                "max": 2024,
                "step": 1,
                "name": "Select Year: "
            }
        }
    ],
    "facet": {
        "field": "Age Range",
        "type": "nominal",
        "title": null,
        "header": {
            "labelFontSize": 16, 
            "labelFont": "Roboto"
        }
        
    },
    "columns": 4,
    "spec": {
        "width": 350,
        "height": 300,
        "layer": [
            {
                "mark": {
                    "type": "arc",
                    "innerRadius": 45,
                    "outerRadius": 90,
                    "stroke": "#fff"
                },
                "encoding": {
                    "theta": {
                        "aggregate": "sum",
                        "field": "Percentage %",
                        "type": "quantitative",
                        "stack": true
                    },
                    "color": {
                        "field": "Classification",
                        "type": "nominal",
                        "legend": {
                            "title": "Classification and Category",
                            "titleFont": "Roboto",
                            "titleFontSize": 14,
                            "labelFont": "Roboto",
                            "labelFontSize": 14,
                            "labelColor": "#333"
                        },
                        "scale": {
                            "scheme": "tableau20"
                        }
                    },
                    "order": {
                        "field": "Classification",
                        "type": "nominal"
                    },
                    "tooltip": [
                        {
                            "field": "Classification",
                            "type": "nominal"
                        },
                        {
                            "field": "Percentage %",
                            "aggregate": "sum",
                            "type": "quantitative",
                            "format": ".1f",
                            "title": "Percentage (%)"
                        }
                    ]
                }
            },
            {
                "mark": {
                    "type": "arc",
                    "innerRadius": 90,
                    "stroke": "#fff"
                },
                "encoding": {
                    "theta": {
                        "field": "Percentage %",
                        "type": "quantitative",
                        "stack": true
                    },
                    "color": {
                        "field": "Classification",
                        "type": "nominal",
                        "legend": null,
                        "scale": {
                            "scheme": "tableau20"
                        }
                    },
                    "detail": {
                        "field": "Category"
                    },
                    "order": {
                        "field": "Classification",
                        "type": "nominal"
                    },
                    "tooltip": [
                        {
                            "field": "Category",
                            "type": "nominal"
                        },
                        {
                            "field": "Percentage %",
                            "type": "quantitative",
                            "format": ".1f",
                            "title": "Percentage (%)"
                        }
                    ]
                }
            }
        ]
    }
}
